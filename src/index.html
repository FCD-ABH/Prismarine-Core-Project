<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prismarine</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <div class="titlebar">
        <div class="titlebar-title" data-tauri-drag-region>
            <img src="app-icon.png" alt="icon" class="titlebar-icon" style="pointer-events: none;" />
            <span style="pointer-events: none;">Prismarine</span>
        </div>
        <div class="titlebar-status">
            <div class="status-item">
                <span class="status-label">CPU:</span>
                <span id="cpu-usage" class="status-value">0%</span>
            </div>
            <div class="status-item">
                <span class="status-label">Memory:</span>
                <span id="memory-usage" class="status-value">0 MB</span>
            </div>
            <div class="status-item">
                <span class="status-label">Â§ñÈÉ®IP:</span>
                <span id="external-ip" class="status-value">ÂèñÂæó‰∏≠...</span>
                <button id="toggle-ip-btn" class="action-btn-small" title="IPË°®Á§∫/ÈùûË°®Á§∫">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        id="eye-icon">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                </button>
            </div>
        </div>
        <div class="titlebar-controls">
            <div class="titlebar-button" id="titlebar-minimize">
                <svg width="10" height="1" viewBox="0 0 10 1">
                    <path d="M0 0h10v1H0z" />
                </svg>
            </div>
            <div class="titlebar-button" id="titlebar-maximize">
                <svg width="10" height="10" viewBox="0 0 10 10">
                    <path d="M1 1h8v8H1V1zm1 1v6h6V2H2z" />
                </svg>
            </div>
            <div class="titlebar-button close" id="titlebar-close">
                <svg width="10" height="10" viewBox="0 0 10 10">
                    <path
                        d="M1.5 0.5L0.5 1.5L4 5L0.5 8.5L1.5 9.5L5 6L8.5 9.5L9.5 8.5L6 5L9.5 1.5L8.5 0.5L5 4L1.5 0.5Z" />
                </svg>
            </div>
        </div>
    </div>
    <div class="app-container">

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <nav class="nav-menu">
                    <button class="nav-item active" data-view="dashboard">
                        <span class="nav-icon"><img src="dashboard-icon.png" alt="Dashboard"
                                class="nav-icon-img"></span>
                        <span>„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</span>
                    </button>
                    <button class="nav-item" data-view="servers">
                        <span class="nav-icon"><img src="server-icon.png" alt="Servers" class="nav-icon-img"></span>
                        <span>„Çµ„Éº„Éê„ÉºÁÆ°ÁêÜ</span>
                    </button>
                    <button class="nav-item" data-view="network">
                        <span class="nav-icon"><img src="network-icon.png" alt="Network" class="nav-icon-img"></span>
                        <span>ProxyNodes</span>
                    </button>
                    <button class="nav-item" data-view="ports">
                        <span class="nav-icon"><img src="port-icon.png" alt="Ports" class="nav-icon-img"></span>
                        <span>„Éù„Éº„ÉàË®≠ÂÆö</span>
                    </button>
                    <button class="nav-item" data-view="bridge">
                        <span class="nav-icon"><img src="bridge-icon.png" alt="Bridge" class="nav-icon-img"></span>
                        <span>BridgeÊé•Á∂ö</span>
                    </button>
                    <button class="nav-item" data-view="settings">
                        <span class="nav-icon"><img src="settings-icon.png" alt="Settings" class="nav-icon-img"></span>
                        <span>Ë®≠ÂÆö</span>
                    </button>
                </nav>

                <div class="sidebar-footer">
                    <div class="upnp-status">
                        <span id="upnp-indicator" class="status-indicator"></span>
                        <span id="upnp-text">UPnPÁ¢∫Ë™ç‰∏≠...</span>
                    </div>
                </div>
            </aside>

            <!-- Content Area -->
            <main class="content-area">
                <!-- Dashboard View -->
                <section id="dashboard-view" class="view active">
                    <h2 class="view-title">„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</h2>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">S</div>
                                <h3>„Çµ„Éº„Éê„ÉºÊï∞</h3>
                            </div>
                            <div class="stat-value" id="total-servers">0</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">‚ñ∫</div>
                                <h3>ÂÆüË°å‰∏≠</h3>
                            </div>
                            <div class="stat-value" id="running-servers">0</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">M</div>
                                <h3>„É°„É¢„É™‰ΩøÁî®Áéá</h3>
                            </div>
                            <div class="stat-value" id="memory-percent">0%</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">C</div>
                                <h3>CPU‰ΩøÁî®Áéá</h3>
                            </div>
                            <div class="stat-value" id="cpu-percent">0%</div>
                        </div>
                    </div>

                    <div class="recent-servers">
                        <h3>ÊúÄËøë„ÅÆ„Çµ„Éº„Éê„Éº</h3>
                        <div id="recent-servers-list" class="server-list"></div>
                    </div>
                </section>

                <!-- Servers View -->
                <section id="servers-view" class="view">
                    <div class="view-header">
                        <h2 class="view-title">„Çµ„Éº„Éê„ÉºÁÆ°ÁêÜ</h2>
                        <button id="create-server-btn" class="btn btn-primary">
                            + Êñ∞Ë¶è„Çµ„Éº„Éê„Éº‰ΩúÊàê
                        </button>
                    </div>

                    <div id="servers-list" class="servers-grid"></div>
                </section>

                <!-- Network View (ProxyNodes List) -->
                <section id="network-view" class="view">
                    <div class="view-header">
                        <h2 class="view-title">ProxyNodes</h2>
                        <button id="create-proxynode-btn" class="btn btn-primary" onclick="openProxyNodeModal()">
                            + ProxyNodeÊñ∞Ë¶è‰ΩúÊàê
                        </button>
                    </div>

                    <div id="proxynode-list" class="servers-grid">
                        <!-- ProxyNode cards will be rendered here -->
                    </div>
                </section>

                <!-- ProxyNode Detail View with NodeUI -->
                <section id="proxynode-detail-view" class="view">
                    <div class="view-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <button class="btn btn-secondary" onclick="switchView('network')">‚Üê Êàª„Çã</button>
                            <h2 class="view-title" id="proxynode-detail-name">ProxyNodeÂêç</h2>
                            <span class="server-status" id="proxynode-detail-status">Stopped</span>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-primary" onclick="startProxyNode()">ÂÖ®Ëµ∑Âãï</button>
                            <button class="btn btn-danger" onclick="stopProxyNode()">ÂÖ®ÂÅúÊ≠¢</button>
                            <button class="btn btn-secondary" onclick="autoLayoutNetwork()">Ëá™ÂãïÈÖçÁΩÆ</button>
                            <button class="btn btn-secondary" onclick="toggleConnectMode()">Êé•Á∂ö„É¢„Éº„Éâ</button>
                            <button class="btn btn-secondary" onclick="saveNetworkLayout()">‰øùÂ≠ò</button>
                            <button class="btn btn-secondary" onclick="deleteProxyNode()">ÂâäÈô§</button>
                        </div>
                    </div>

                    <div class="network-editor-container" style="display: flex; gap: 15px; height: 550px;">
                        <!-- Server Palette -->
                        <div class="network-palette"
                            style="width: 200px; background: rgba(0,0,0,0.2); border-radius: 8px; padding: 15px; border: 1px solid rgba(255,255,255,0.05); overflow-y: auto;">
                            <h3 style="margin: 0 0 10px 0; font-size: 0.9rem; color: #aaa;">„Çµ„Éº„Éê„ÉºËøΩÂä†</h3>
                            <div id="network-server-palette" style="display: flex; flex-direction: column; gap: 8px;">
                            </div>
                        </div>

                        <!-- Canvas Area -->
                        <div class="network-canvas-wrapper" id="network-canvas-wrapper"
                            style="flex: 1; background: rgba(10,15,25,0.8); border-radius: 8px; position: relative; border: 1px solid rgba(255,255,255,0.1); overflow: hidden;">
                            <svg id="network-canvas" style="width: 100%; height: 100%;">
                                <defs>
                                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5"
                                        orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1" />
                                    </marker>
                                </defs>
                                <g id="network-connections"></g>
                                <g id="network-nodes"></g>
                            </svg>
                            <button id="network-fullscreen-btn" onclick="toggleNetworkFullscreen()"
                                style="position: absolute; top: 10px; right: 10px; background: rgba(99,102,241,0.8); color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 0.85em; display: flex; align-items: center; gap: 5px;">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="15 3 21 3 21 9"></polyline>
                                    <polyline points="9 21 3 21 3 15"></polyline>
                                    <line x1="21" y1="3" x2="14" y2="10"></line>
                                    <line x1="3" y1="21" x2="10" y2="14"></line>
                                </svg>
                                ÊúÄÂ§ßÂåñ
                            </button>
                            <div id="network-instructions"
                                style="position: absolute; bottom: 10px; left: 10px; color: #666; font-size: 0.8em;">
                                „Éâ„É©„ÉÉ„Ç∞: „Éé„Éº„ÉâÁßªÂãï | Êé•Á∂ö„É¢„Éº„Éâ: „ÇØ„É™„ÉÉ„ÇØ„ÅßÁ∑ö„ÇíÂºï„Åè
                            </div>
                        </div>

                        <!-- Connection Info -->
                        <div class="network-info"
                            style="width: 220px; background: rgba(0,0,0,0.2); border-radius: 8px; padding: 15px; border: 1px solid rgba(255,255,255,0.05);">
                            <h3 style="margin: 0 0 10px 0; font-size: 0.9rem; color: #aaa;">Êé•Á∂öÊÉÖÂ†±</h3>
                            <div id="network-connection-list" style="font-size: 0.85em;"></div>
                        </div>
                    </div>
                </section>

                <!-- Ports View -->
                <section id="ports-view" class="view">
                    <h2 class="view-title">„Éù„Éº„ÉàË®≠ÂÆö</h2>

                    <div class="managed-ports-header">
                        <h3>ÈñãÊîæ„Éù„Éº„Éà‰∏ÄË¶ß <span id="port-count" class="badge">0/5</span></h3>
                    </div>

                    <div id="managed-ports-list" class="managed-ports-list">
                        <!-- Port Items will be injected here via JS (5 slots) -->
                    </div>

                    <!-- Port Creation Modal -->
                    <div id="port-modal" class="modal hidden">
                        <div class="modal-content glass-panel">
                            <h3 class="modal-title">„Éù„Éº„ÉàÈñãÊîæË®≠ÂÆö</h3>

                            <div class="form-group">
                                <label>ÁÆ°ÁêÜÂêç</label>
                                <input type="text" id="port-name-input" class="input" placeholder="‰æã: „Çµ„Éê„Ç§„Éê„É´„Çµ„Éº„Éê„Éº"
                                    maxlength="20">
                            </div>

                            <div class="form-group">
                                <label>„Éù„Éº„ÉàÁï™Âè∑</label>
                                <input type="number" id="port-number-input" class="input" value="25565" min="1"
                                    max="65535">
                            </div>

                            <div class="form-group">
                                <label>„Éó„É≠„Éà„Ç≥„É´</label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="protocol" value="TCP" checked>
                                        <span>TCP (Ê®ôÊ∫ñ)</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="protocol" value="UDP">
                                        <span>UDP (BE„Å™„Å©)</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="protocol" value="BOTH">
                                        <span>TCP+UDP</span>
                                    </label>
                                </div>
                            </div>

                            <div class="modal-actions">
                                <button id="cancel-port-btn" class="btn btn-ghost">„Ç≠„É£„É≥„Çª„É´</button>
                                <button id="submit-port-btn" class="btn btn-primary">ÈñãÊîæ„Åô„Çã</button>
                            </div>
                        </div>
                        <!-- Removed premature closing div -->
                </section>

                <!-- Bridge View -->
                <section id="bridge-view" class="view">
                    <h2 class="view-title">Prismarine Bridge</h2>

                    <div class="bridge-section">
                        <p class="bridge-description">„É´„Éº„Çø„ÉºË®≠ÂÆö„Å™„Åó„Åß‰∏ñÁïå‰∏≠„Åã„Çâ„Çµ„Éº„Éê„Éº„Å´Êé•Á∂ö„Åß„Åç„Åæ„ÅôÔºàÁôªÈå≤‰∏çË¶ÅÔºÅÔºâ</p>

                        <div class="bridge-controls">
                            <button id="start-bridge-btn" class="btn btn-primary">Bridge„ÇíÈñãÂßã</button>
                            <button id="stop-bridge-btn" class="btn btn-secondary" disabled>Bridge„ÇíÂÅúÊ≠¢</button>
                        </div>

                        <div id="bridge-status" class="info-box bridge-status">
                            <span class="status-label">„Çπ„ÉÜ„Éº„Çø„Çπ:</span>
                            <span id="bridge-status-text">ÂÅúÊ≠¢‰∏≠</span>
                        </div>

                        <div id="bridge-address" class="bridge-address" style="display: none;">
                            <span class="address-label">Êé•Á∂ö„Ç¢„Éâ„É¨„Çπ:</span>
                            <code id="bridge-address-text"></code>
                            <button id="copy-bridge-address" class="btn btn-small">„Ç≥„Éî„Éº</button>
                        </div>
                    </div>
                </section>

                <!-- Settings View -->
                <section id="settings-view" class="view">
                    <h2 class="view-title">Ë®≠ÂÆö</h2>

                    <div class="settings-group">
                        <h3>‰∏ÄËà¨Ë®≠ÂÆö</h3>
                        <div class="setting-item">
                            <label class="checkbox-label">
                                <input type="checkbox" id="auto-port-forwarding" checked />
                                <span>„Çµ„Éº„Éê„ÉºËµ∑ÂãïÊôÇ„Å´Ëá™ÂãïÁöÑ„Å´„Éù„Éº„ÉàËª¢ÈÄÅ„ÇíË®≠ÂÆö</span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÊÉÖÂ†±</h3>
                        <p class="info-text">Minecraft Server Manager v0.1.0</p>
                        <p class="info-text">Powered by Tauri + Rust</p>
                    </div>
                </section>

                <!-- Server Detail View -->
                <section id="server-detail-view" class="view">
                    <div class="detail-header">
                        <button id="back-to-servers-btn" class="btn btn-secondary">
                            ‚Üê „Çµ„Éº„Éê„Éº‰∏ÄË¶ß„Å´Êàª„Çã
                        </button>
                        <div class="detail-title-section">
                            <h2 class="view-title" id="detail-server-name">„Çµ„Éº„Éê„ÉºÂêç</h2>
                            <span class="server-status" id="detail-server-status">Stopped</span>
                        </div>
                        <div class="detail-actions">
                            <button id="detail-start-btn" class="btn btn-primary" style="display: none;">Ëµ∑Âãï</button>
                            <button id="detail-restart-btn" class="btn btn-warning" style="display: none;">ÂÜçËµ∑Âãï</button>
                            <button id="detail-stop-btn" class="btn btn-danger" style="display: none;">ÂÅúÊ≠¢</button>
                            <button id="detail-folder-btn" class="btn btn-secondary">üìÅ „Éï„Ç©„É´„ÉÄ„ÇíÈñã„Åè</button>
                            <button id="detail-delete-btn" class="btn btn-secondary">ÂâäÈô§</button>
                        </div>
                    </div>

                    <div class="detail-content">
                        <div class="detail-main">
                            <div class="detail-tabs">
                                <button class="detail-tab-btn active" data-target="logs">„É≠„Ç∞ (Console)</button>
                                <button class="detail-tab-btn" data-target="players">„Éó„É¨„Ç§„É§„Éº</button>
                                <button class="detail-tab-btn" data-target="plugins">„Éó„É©„Ç∞„Ç§„É≥„Çπ„Éà„Ç¢</button>
                                <button class="detail-tab-btn" data-target="settings">Ë®≠ÂÆö</button>
                            </div>

                            <div id="tab-content-logs" class="detail-tab-content active">
                                <div class="detail-logs-section">
                                    <div class="logs-header">
                                        <h3>„Çµ„Éº„Éê„Éº„É≠„Ç∞Ôºà„É™„Ç¢„É´„Çø„Ç§„É†Ôºâ</h3>
                                        <div class="logs-header-actions">
                                            <button id="detail-copy-logs-btn"
                                                class="btn btn-secondary btn-sm">„Ç≥„Éî„Éº</button>
                                            <button id="detail-clear-logs-btn"
                                                class="btn btn-secondary btn-sm">„ÇØ„É™„Ç¢</button>
                                        </div>
                                    </div>
                                    <div class="detail-logs-viewer" id="detail-logs-content">
                                        <div class="logs-loading">„É≠„Ç∞„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
                                    </div>
                                    <div class="console-input-section">
                                        <div class="console-input-wrapper">
                                            <span class="console-prompt">></span>
                                            <input type="text" id="console-command-input" class="console-input"
                                                placeholder="„Ç≥„Éû„É≥„Éâ„ÇíÂÖ•Âäõ (‰æã: op PlayerName, gamemode creative @a, stop)"
                                                autocomplete="off" />
                                            <button id="send-command-btn" class="btn btn-primary btn-sm">ÈÄÅ‰ø°</button>
                                        </div>
                                        <div class="console-hint">
                                            üí° „Éí„É≥„Éà: /op „ÅßOP‰ªò‰∏é„ÄÅ/gamemode „Åß„Ç≤„Éº„É†„É¢„Éº„ÉâÂ§âÊõ¥„ÄÅ/stop „Åß„Çµ„Éº„Éê„ÉºÂÅúÊ≠¢
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="tab-content-plugins" class="detail-tab-content hidden">
                                <div class="plugin-store-container">
                                    <div class="plugin-store-header">
                                        <!-- Starter Pack Banner -->
                                        <div class="starter-pack-banner">
                                            <div class="starter-pack-info">
                                                <div class="starter-pack-title">üëë ÂÆöÁï™„Éó„É©„Ç∞„Ç§„É≥„Çª„ÉÉ„Éà</div>
                                                <div class="starter-pack-desc">LuckPerms, EssentialsX, WorldEdit, Vault,
                                                    CoreProtect, QuickShop-Hikari „Çí‰∏ÄÊã¨Â∞éÂÖ•</div>
                                            </div>
                                            <button id="install-starter-pack-btn" class="btn btn-accent btn-sm">
                                                „Åæ„Å®„ÇÅ„Å¶„Ç§„É≥„Çπ„Éà„Éº„É´
                                            </button>
                                        </div>

                                        <div class="plugin-search-row">
                                            <!-- Store type selector (for hybrid servers like Mohist) -->
                                            <select id="store-type-select" class="input input-sm"
                                                style="width: 100px; display: none;">
                                                <option value="plugin">Plugin</option>
                                                <option value="mod">Mod</option>
                                            </select>
                                            <select id="plugin-source-select" class="input input-sm"
                                                style="width: 120px;">
                                                <option value="Modrinth">Modrinth</option>
                                                <option value="Spigot">Spigot</option>
                                            </select>
                                            <input type="text" id="plugin-search-input" class="input input-sm"
                                                style="flex: 1;" placeholder="„Éó„É©„Ç∞„Ç§„É≥„ÇíÊ§úÁ¥¢... (‰æã: WorldEdit, Essentials)"
                                                autocomplete="off">
                                            <button id="plugin-search-btn" class="btn btn-primary btn-sm">Ê§úÁ¥¢</button>
                                            <button id="plugin-refresh-btn" class="btn btn-secondary btn-sm">Êõ¥Êñ∞</button>
                                        </div>
                                    </div>
                                    <div id="plugin-search-results" class="plugin-list">
                                        <!-- Results injected here -->
                                        <div class="plugin-list-empty">
                                            Ê§úÁ¥¢„Ç≠„Éº„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Éó„É©„Ç∞„Ç§„É≥„ÇíÊé¢„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="tab-content-players" class="detail-tab-content hidden">
                                <div class="detail-card">
                                    <div
                                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                        <h3 style="margin: 0;">„Ç™„É≥„É©„Ç§„É≥„Éó„É¨„Ç§„É§„Éº & OPÁÆ°ÁêÜ</h3>
                                        <button class="btn btn-secondary btn-sm" onclick="refreshPlayerList()"
                                            style="min-width: 80px;">
                                            üîÑ Êõ¥Êñ∞
                                        </button>
                                    </div>
                                    <div id="player-list-container"
                                        style="display: flex; flex-direction: column; gap: 8px; max-height: 500px; overflow-y: auto;">
                                        <div style="font-size: 0.9em; color: #888; text-align: center;">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
                                    </div>
                                </div>
                            </div>

                            <div id="tab-content-settings" class="detail-tab-content hidden">
                                <div class="detail-card">
                                    <h3>Ëá™ÂãïÂÜçËµ∑ÂãïË®≠ÂÆö</h3>
                                    <div class="form-group">
                                        <div
                                            style="display: flex; align-items: center; justify-content: space-between;">
                                            <div style="display: flex; align-items: center;">
                                                <label class="toggle-switch">
                                                    <input type="checkbox" id="detail-auto-restart-toggle"
                                                        onchange="toggleAutoRestartSettings()">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                                <span
                                                    style="margin-left: 12px; font-weight: 500; color: var(--text-main);">Ëá™ÂãïÂÜçËµ∑Âãï„ÇíÊúâÂäπ„Å´„Åô„Çã</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="auto-restart-options"
                                        style="margin-top: 15px; padding-left: 10px; border-left: 2px solid var(--border-color); opacity: 0.5;">
                                        <!-- Mode Selection -->
                                        <div class="form-group" style="margin-bottom: 10px;">
                                            <label style="margin-bottom: 8px; display: block;">ÂÜçËµ∑Âãï„É¢„Éº„Éâ</label>
                                            <div style="display: flex; gap: 15px;">
                                                <label class="radio-label">
                                                    <input type="radio" name="restartMode" value="Interval" checked
                                                        onchange="toggleAutoRestartMode()">
                                                    ÈñìÈöî„ÇíÊåáÂÆö
                                                </label>
                                                <label class="radio-label">
                                                    <input type="radio" name="restartMode" value="Schedule"
                                                        onchange="toggleAutoRestartMode()">
                                                    ÊôÇÈñì„ÇíÊåáÂÆö
                                                </label>
                                            </div>
                                        </div>

                                        <!-- Interval Settings -->
                                        <div id="restart-interval-settings" class="form-group">
                                            <label>ÂÜçËµ∑ÂãïÈñìÈöî</label>
                                            <div style="display: flex; gap: 8px; align-items: center;">
                                                <input type="number" id="restart-interval-h" class="input input-sm"
                                                    style="width: 60px;" value="24" min="0" disabled> ÊôÇÈñì
                                                <input type="number" id="restart-interval-m" class="input input-sm"
                                                    style="width: 60px;" value="0" min="0" max="59" disabled> ÂàÜ
                                                <input type="number" id="restart-interval-s" class="input input-sm"
                                                    style="width: 60px;" value="0" min="0" max="59" disabled> Áßí
                                            </div>
                                        </div>

                                        <!-- Schedule Settings -->
                                        <div id="restart-schedule-settings" class="form-group hidden">
                                            <label>ÊåáÂÆöÊôÇÂàª (ÊØéÊó•)</label>
                                            <div style="display: flex; gap: 8px; align-items: center;">
                                                <input type="time" id="restart-schedule-time" class="input input-sm"
                                                    style="width: 120px;" disabled>
                                                <select id="restart-timezone" class="input input-sm"
                                                    style="width: 150px;" disabled>
                                                    <option value="Asia/Tokyo">Asia/Tokyo</option>
                                                    <option value="UTC">UTC</option>
                                                    <option value="America/New_York">America/New_York</option>
                                                    <option value="Europe/London">Europe/London</option>
                                                </select>
                                            </div>
                                        </div>

                                        <button id="detail-save-auto-restart-btn" class="btn btn-primary btn-sm"
                                            style="margin-top: 10px;" disabled>‰øùÂ≠ò</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="detail-sidebar">
                            <div class="detail-info-card">
                                <h3>„Çµ„Éº„Éê„ÉºÊÉÖÂ†±</h3>
                                <div class="info-grid">
                                    <div class="info-item full-width" style="margin-bottom: 12px;">
                                        <span class="info-label">Ë™¨Êòé (MOTD):</span>
                                        <div style="display: flex; align-items: center; gap: 8px; width: 100%;">
                                            <input type="text" id="detail-server-motd-input" class="input input-sm"
                                                style="flex: 1;" placeholder="Minecraft Server" autocomplete="off">
                                            <button id="save-motd-btn" class="btn btn-secondary btn-sm">‰øùÂ≠ò</button>
                                        </div>
                                    </div>
                                    <div class="info-item full-width" style="margin-bottom: 12px;">
                                        <span class="info-label">ÊúÄÂ§ß‰∫∫Êï∞:</span>
                                        <div style="display: flex; align-items: center; gap: 8px; width: 100%;">
                                            <button id="decrease-players-btn" class="stepper-btn">-</button>
                                            <input type="number" id="detail-server-max-players-input"
                                                class="input input-sm" style="flex: 1; text-align: center;"
                                                placeholder="20" min="1" autocomplete="off">
                                            <button id="increase-players-btn" class="stepper-btn">+</button>
                                            <button id="save-max-players-btn" class="btn btn-secondary btn-sm"
                                                style="margin-left: 4px;">‰øùÂ≠ò</button>
                                        </div>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">„Çø„Ç§„Éó:</span>
                                        <span class="info-value" id="detail-server-type">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">„Éê„Éº„Ç∏„Éß„É≥:</span>
                                        <span class="info-value" id="detail-server-version">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">„Éù„Éº„Éà:</span>
                                        <span class="info-value" id="detail-server-port">-</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">„É°„É¢„É™:</span>
                                        <span class="info-value" id="detail-server-memory">-</span>
                                    </div>
                                    <div class="info-item full-width" style="margin-top: 8px;">
                                        <button id="open-plugins-btn" class="btn btn-secondary btn-sm btn-full">
                                            üìÅ „Éó„É©„Ç∞„Ç§„É≥„Éï„Ç©„É´„ÉÄ„ÇíÈñã„Åè
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="detail-info-card">
                                <h3>Áµ±Ë®àÊÉÖÂ†±</h3>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <span class="info-label">„Éó„É¨„Ç§„É§„Éº:</span>
                                        <span class="info-value" id="detail-players">0/20</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label">Á®ºÂÉçÊôÇÈñì:</span>
                                        <span class="info-value" id="detail-uptime">-</span>
                                    </div>
                                </div>
                            </div>



                            <div class="detail-info-card">
                                <h3>„ÇØ„É≠„Çπ„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†</h3>
                                <p class="info-text text-sm">Áµ±ÂêàÁâà (Switch/„Çπ„Éû„Éõ) „Åã„Çâ„ÅÆÂèÇÂä†„ÇíË®±ÂèØ„Åó„Åæ„Åô„ÄÇ</p>
                                <p class="info-text text-xs text-muted">‚Äª ViaVersion„ÅåÂøÖË¶Å„Å´„Å™„ÇãÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</p>
                                <div id="geyser-status-area" style="margin-top: 10px;">
                                    <button id="install-geyser-btn" class="btn btn-secondary btn-full">
                                        üîÑ „ÇØ„É≠„Çπ„Éó„É¨„Ç§„ÇíÊúâÂäπÂåñ
                                    </button>
                                </div>
                            </div>

                            <div class="detail-info-card">
                                <h3>„Éê„Éº„Ç∏„Éß„É≥‰∫íÊèõÊÄß (ViaVersion)</h3>
                                <p class="info-text text-sm">Êñ∞„Åó„ÅÑ„Éê„Éº„Ç∏„Éß„É≥„ÅÆ„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Åß„ÅÆÂèÇÂä†„ÇíË®±ÂèØ„Åó„Åæ„Åô„ÄÇ</p>
                                <div id="viaversion-status-area" style="margin-top: 10px;">
                                    <button id="install-viaversion-btn" class="btn btn-secondary btn-full">
                                        üîÑ ‰∫íÊèõÊÄß„ÇíÊúâÂäπÂåñ
                                    </button>
                                </div>
                            </div>
                        </div> <!-- End detail-sidebar -->
                    </div> <!-- End detail-content -->
                </section>
            </main>
        </div>
    </div>

    <!-- Create Server Modal -->
    <div id="create-server-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Êñ∞Ë¶è„Çµ„Éº„Éê„Éº‰ΩúÊàê</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="server-name">„Çµ„Éº„Éê„ÉºÂêç</label>
                    <input type="text" id="server-name" class="input" placeholder="My Server" autocomplete="off" />
                </div>

                <div class="form-group">
                    <label>„Çµ„Éº„Éê„Éº„Çø„Ç§„Éó</label>
                    <div class="custom-select-wrapper" id="wrapper-server-type">
                        <div class="custom-select">
                            <div class="custom-select-trigger">
                                <span>Paper</span>
                                <div class="arrow"></div>
                            </div>
                            <div class="custom-options">
                                <span class="custom-option" data-value="vanilla">Vanilla</span>
                                <span class="custom-option selected" data-value="paper">Paper (Êé®Â•®)</span>
                                <span class="custom-option" data-value="purpur">Purpur (ÊúÄÈÅ©Âåñ)</span>
                                <span class="custom-option" data-value="spigot">Spigot („Éì„É´„Éâ)</span>
                                <span class="custom-option" data-value="forge">Forge (MODÂØæÂøú)</span>
                                <span class="custom-option" data-value="mohist">Mohist (Forge+Bukkit)</span>
                                <span class="custom-option" data-value="taiyitist">Taiyitist (Fabric+Bukkit)</span>
                                <span class="custom-option" data-value="banner">Banner (Fabric+Bukkit)</span>
                                <div class="option-divider">Proxy Servers</div>
                                <span class="custom-option" data-value="velocity">Velocity (Êé®Â•®)</span>
                                <span class="custom-option" data-value="waterfall">Waterfall</span>
                                <span class="custom-option" data-value="bungeecord">BungeeCord</span>
                            </div>
                        </div>
                        <input type="hidden" id="server-type" value="paper">
                    </div>
                </div>

                <div class="form-group">
                    <label>„Éê„Éº„Ç∏„Éß„É≥</label>
                    <div class="custom-select-wrapper" id="wrapper-server-version">
                        <div class="custom-select disabled">
                            <div class="custom-select-trigger">
                                <span class="placeholder">Ë™≠„ÅøËæº„Åø‰∏≠...</span>
                                <div class="arrow"></div>
                            </div>
                            <div class="custom-options">
                                <!-- Populated dynamically -->
                            </div>
                        </div>
                        <input type="hidden" id="server-version-select" value="">
                    </div>
                </div>

                <div class="form-group">
                    <label for="server-port">„Éù„Éº„Éà</label>
                    <input type="number" id="server-port" class="input" placeholder="25565" value="25565" min="1"
                        max="65535" autocomplete="off" />
                </div>

                <div class="form-group">
                    <label for="server-memory">ÊúÄÂ§ß„É°„É¢„É™</label>
                    <div class="input-with-suffix">
                        <input type="number" id="server-memory" class="input" placeholder="2" value="2" min="1" max="32"
                            autocomplete="off" />
                        <span class="input-suffix">GB</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancel-create-btn" class="btn btn-secondary">„Ç≠„É£„É≥„Çª„É´</button>
                <button id="confirm-create-btn" class="btn btn-primary">‰ΩúÊàê</button>
            </div>
        </div>
    </div>

    <!-- Custom Confirmation Modal -->
    <div id="confirm-modal" class="confirm-modal">
        <div class="confirm-modal-backdrop"></div>
        <div class="confirm-modal-content">
            <div class="confirm-modal-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 6h18"></path>
                    <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                    <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                    <line x1="10" y1="11" x2="10" y2="17"></line>
                    <line x1="14" y1="11" x2="14" y2="17"></line>
                </svg>
            </div>
            <h3 class="confirm-modal-title">ÂâäÈô§„ÅÆÁ¢∫Ë™ç</h3>
            <p class="confirm-modal-message" id="confirm-modal-message">„Åì„ÅÆ„Ç¢„Ç§„ÉÜ„É†„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü</p>
            <div class="confirm-modal-actions">
                <button id="confirm-modal-cancel" class="btn btn-ghost">„Ç≠„É£„É≥„Çª„É´</button>
                <button id="confirm-modal-ok" class="btn btn-danger">ÂâäÈô§„Åô„Çã</button>
            </div>
        </div>
    </div>

    <!-- EULA Confirmation Modal -->
    <div id="eula-modal" class="eula-modal">
        <div class="eula-modal-backdrop"></div>
        <div class="eula-modal-content">
            <div class="eula-modal-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
            </div>
            <h3 class="eula-modal-title">Minecraft EULA</h3>
            <p class="eula-modal-message">
                Minecraft „Çµ„Éº„Éê„Éº„ÇíËµ∑Âãï„Åô„Çã„Å´„ÅØ„ÄÅMojang „ÅÆ<br>
                <a href="https://aka.ms/MinecraftEULA" target="_blank" class="eula-link">„Ç®„É≥„Éâ„É¶„Éº„Ç∂„Éº„É©„Ç§„Çª„É≥„ÇπË¶èÁ¥Ñ (EULA)</a><br>
                „Å´ÂêåÊÑè„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ
            </p>
            <div class="eula-modal-actions">
                <button id="eula-modal-cancel" class="btn btn-ghost">„Ç≠„É£„É≥„Çª„É´</button>
                <button id="eula-modal-ok" class="btn btn-primary-gradient">ÂêåÊÑè„Åô„Çã</button>
            </div>
        </div>
    </div>

    <!-- ProxyNode Creation Modal -->
    <div id="proxynode-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ProxyNode‰ΩúÊàê</h2>
                <button class="modal-close" onclick="closeProxyNodeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>„Éó„É≠„Ç≠„Ç∑„Çµ„Éº„Éê„Éº</label>
                    <select id="proxynode-proxy-select" class="input">
                        <option value="">-- ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ --</option>
                    </select>
                    <p class="form-hint" style="font-size: 0.8em; color: #888; margin-top: 4px;">
                        Êó¢Â≠ò„ÅÆVelocity/BungeeCord/Waterfall„Çµ„Éº„Éê„Éº„ÇíÈÅ∏Êäû„ÄÅ„Åæ„Åü„ÅØ„Çµ„Éº„Éê„ÉºÁÆ°ÁêÜ„Åã„ÇâÊñ∞Ë¶è‰ΩúÊàê
                    </p>
                </div>

                <div class="form-group">
                    <label>„Éê„ÉÉ„ÇØ„Ç®„É≥„Éâ„Çµ„Éº„Éê„Éº</label>
                    <p class="form-hint" style="font-size: 0.8em; color: #888; margin-bottom: 8px;">
                        „Åì„ÅÆ„Éó„É≠„Ç≠„Ç∑„Å´Êé•Á∂ö„Åô„Çã„Çµ„Éº„Éê„Éº„ÇíÈÅ∏ÊäûÔºàË§áÊï∞ÂèØÔºâ
                    </p>
                    <div id="proxynode-backend-list" class="checkbox-list"
                        style="max-height: 200px; overflow-y: auto; background: rgba(0,0,0,0.2); border-radius: 6px; padding: 10px;">
                        <!-- Populated dynamically -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancel-proxynode-btn" class="btn btn-secondary"
                    onclick="closeProxyNodeModal()">„Ç≠„É£„É≥„Çª„É´</button>
                <button id="confirm-proxynode-btn" class="btn btn-primary" onclick="createProxyNode()">‰ΩúÊàê</button>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
</body>

</html>